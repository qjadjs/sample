NAKJI


�럹�씠吏� 泥섎━
�럹�씠吏� 泥섎━瑜� �븯�젮硫� sql�쓣 蹂�寃� �븘�슂
�럹�씠吏�踰덊샇(pageNum), �븳 �럹�씠吏� �떦 紐뉕컻�쓽 �뜲�씠�꽣瑜� 蹂댁뿬以꾩�(amount) 
-> �겢�옒�뒪濡� 愿�由�
(pageNum-1)*amount

<![CDATA[SQL援щЦ]]>
SQL 援щЦ �븞�뿉 �듅�닔 臾몄옄媛� �뱾�뼱媛� 寃쎌슦 XML �뙆�씪�뿉�꽌 �옒紐� �씤�떇�븯�뒗 寃쎌슦瑜� 留됯린 �쐞�빐 �궗�슜�븯�뒗 泥섎━諛⑸쾿(Character Data 以꾩엫留�) sql 援щЦ�븞�뿉 遺��벑�샇 媛숈� �듅�닔臾몄옄媛� �뱾�뼱媛� �븣 �궗�슜
xml �깭洹몃쭔�뱾�븣 

�솕硫� 諛묒뿉 �럹�씠吏� 踰덊샇瑜� �몴�떆, �럹�씠吏� 踰덊샇瑜� �겢由��븷 �닔 �엳�룄濡�
< 1 2 3 4 5 >

�럹�씠吏� 泥섎━�븷 �븣 �븘�슂�븳 �젙蹂대뱾
�쁽�옱 �럹�씠吏� 踰덊샇(pageNum)
�씠�쟾怨� �떎�쓬�쑝濡� �씠�룞 媛��뒫�븳 留곹겕(prev, next)
�솕硫댁뿉�꽌 蹂댁뿬吏��뒗 �럹�씠吏��쓽 �떆�옉, 留덉�留�(start, end)

�궗�슜�옄媛� 5 �럹�씠吏�瑜� 蹂닿퀬 �엳�떎 -> 1 ~ 10 �럹�씠吏� /start 1 , end 10
�궗�슜�옄媛� 19 �럹�씠吏�瑜� 蹂닿퀬 �엳�떎 -> 11 ~ 20�럹�씠吏� / start 11, end 20
�럹�씠吏� �걹踰덊샇 怨꾩궛
end : (int)Math.ceil(�쁽�옱 �럹�씠吏� 踰덊샇 / 10.0)*10)
start : end - 9
end�뒗 �쟾泥� �뜲�씠�꽣 �닔(total)�쓽 �쁺�뼢�쓣 諛쏅뒗�떎
吏꾩쭨 �걹踰덊샇瑜� realend�씪怨� �븯硫�
realend : Math.ceil((total*1.0)/amount(�럹�씠吏� �떦 媛쒖닔))
realend < end
-> �럹�씠吏� �걹踰덊샇瑜� realend濡� �벖�떎

�씠�쟾�럹�씠吏� / �떎�쓬 �럹�씠吏�
�씠�쟾�럹�씠吏� : �쁽�옱 �럹�씠吏� - 1(�떆�옉 �럹�씠吏� 踰덊샇媛� 1蹂대떎 �겙 寃쎌슦)
�떎�쓬 �럹�씠吏� : �쁽�옱 �럹�씠吏� + 1(�쁽�옱 �럹�씠吏�媛� realend蹂대떎 �옉�쓣 寃쎌슦)

寃��깋 湲곕뒫
�젣紐� / �궡�슜 / �옉�꽦�옄

寃��깋寃곌낵媛� �뿬�윭媛쒓� �굹�삱 �닔 �엳�떎
�뿬�윭媛쒓� �굹�삱 �떆 -> �럹�씠吏� 泥섎━ �븘�슂
�젣紐� + �궡�슜

寃��깋議곌굔�씠 �긽�솴�뿉 �뵲�씪 �떎瑜대떎
�궗�슜�옄媛� �젣紐� 寃��깋�쓣 �븳 寃쎌슦 where title like '%�궎�썙�뱶%'
�궗�슜�옄媛� �젣紐� 寃��깋�쓣 �븳 寃쎌슦 where content like '%�궎�썙�뱶%'
�궗�슜�옄媛� �젣紐�+ �궡�슜�쓣 寃��깋�쓣 �븳 寃쎌슦

Mybatis�쓽 �룞�쟻 sql (jstl �깭洹몄� 鍮꾩듂�븿)
if, choose, trim, foreach
if�뒗 test�씪�뒗 �냽�꽦怨� �븿猿� �듅�젙�븳 議곌굔�씠 true媛� �릺�뿀�쓣 �븣
�룷�븿�맂 sql�쓣 �궗�슜�븯怨좎옄 �븷 �븣 �옉�꽦�븳�떎

�떒�씪 �빆紐⑹쑝濡� �젣紐� 寃��깋�쓣 �븯�뒗 �긽�솴 / �궡�슜 / �옉�꽦�옄
寃��깋 議곌굔�씠 T硫� �젣紐� 寃��깋�쓣 �븷寃껋씠�떎
寃��깋 議곌굔�씠 C硫� �궡�슜 寃��깋�쓣 �븷 寃껋씠�떎
寃��깋 議곌굔�씠 W硫� �옉�꽦�옄 寃��깋�쓣 �븷 寃껋씠�떎
<if test="type == 'T'.tostring();">
	(title like '%'||#{keword}||'%'
</if>
<if test="type == 'C'.tostring();">
	(title like '%'||#{keword}||'%'
</if>

choose�뒗 �뿬�윭 �긽�솴�뱾 以� �븯�굹�쓽 �긽�솴�뿉�꽌留� �룞�옉�븳�떎 if-else, jstl�쓽 <choose>
<when test="type == 'T'.toString()">
(title like '%'||#{keyword||'%')
</when>
<when test="type == 'C'.toString()">
(title like '%'||#{keyword||'%')
</when>
<otherwise>
�쐞�뿉�꽌 �븘臾� 議곌굔�룄 �빐�떦�븯吏� �븡�쓣 �븣
</otherwise>
</choose>

sql �옉�꽦�쓣 �븯�뒗�뜲 bno�씪�뒗 媛믪씠 null�씠 �븘�땲硫� where �젅�쓣 異붽��빐�꽌 bno 媛믪쓣 鍮꾧탳�븯怨� �떢�떎
select * from tbl_board
<where>
 <if test="bno != null"
 	bno = #{bno}
 	</if>
 	</where>
 	�깭洹� �븞履� sql臾몄씠 �깮�꽦�릺硫� �븵�뿉 where 援щЦ�씠 遺숆퀬, 洹몃젃吏� �븡�쑝硫� �깮�꽦�릺吏� �븡�뒗�떎
 	bno 媛믪씠 議댁옱�븯�뒗 寃쎌슦 : select * from tbl_board where bno = xxx;
 	bno 媛믪씠 null�씤 寃쎌슦 : select * from tbl_board
 	
 	where�젅 �븞�뿉 and�굹 or濡� 議곌굔�쓣 異붽��븯怨� �떢�쓣 寃쎌슦
 	<trim> �깭洹�
 	
 	<trimm prefix="and">
 	rownum <= 10
 	</trim>
 	
 	and rownum <= 10
 	prefix ,suffix, �냽�꽦 �궗�슜 媛��뒫
 	
 	<foreach> list, 諛곗뿴, 留� �벑�쓣 �씠�슜�빐�꽌 諛섎났 泥섎━�븷 �븣 �궗�슜�븯�뒗 �깭洹�
 	</foreach>
 	
 	getListWithPage -> 寃��깋 寃곌낵 由ъ뒪�듃
 	(寃��깋 議곌굔�씠 �뾾�뒗 寃쎌슦�뒗 1�럹�씠吏� �뵫 媛��졇�삩�떎)
 	(寃��깋 議곌굔�씠 �엳�뒗 寃쎌슦 �럹�씠吏��닔 怨꾩궛�쓣 �빐�빞�븳�떎 -> �씠�븣 �럹�씠吏��닔�뒗 珥앺럹�씠吏� �닔媛� �븘�땶 寃��깋 寃곌낵�뿉 ���븳 �럹�씠吏� �닔瑜� 怨꾩궛�빐�빞�븳�떎)
 	
 select * from tbl_reply where bno = 2049 order by rno asc;
 
 -- rno 瑜� 癒쇱� 李얘퀬  ( rno濡� 吏��젙�맂 �씤�뜳�뒪�뿉�꽌 rno 瑜� 癒쇱� 李얘퀬 )
 -- 洹� �떎�쓬�뿉 rno�뿉 �빐�떦�븯�뒗  bno瑜� 李얘쾶�맂�떎.
 
 -- �슦由ш� 吏�湲� �쎒�뿉�꽌 �룞�옉�븯�뒗 �뙎湲� 議고쉶湲곕뒫��
 -- 寃뚯떆湲��쓽bno瑜� 癒쇱� 李얘퀬 rno瑜� 李얜뒗�떎.
 
 -- pk_reply留� �씠�슜�빐�꽌 �뙎湲� 寃��깋�쓣 �븯�떎 蹂대땲 以묎컙�뿉 �엳�뒗 �떎瑜� 寃뚯떆臾쇱쓽 �뙎湲��룄
 -- �엳�쓣�뀗�뜲 洹� 以묎컙�뿉 �엳�뒗 �떎瑜� 寃뚯떆臾쇱쓽 �뙎湲��닔媛� �쟻�쓣�븣�뒗 �긽愿��씠 �뾾�뒗�뜲
 -- �뙎湲��씠 留롮븘吏�硫� 留롮븘吏덉닔濡� �꽦�뒫�뿉 臾몄젣媛� �깮湲몄닔�룄 �엳�떎..
 
 -- �뜲�씠�꽣踰좎씠�뒪媛� 寃��깋�븯�뒗 �닚�꽌�룄 �쎒�뿉�꽌 �뙎湲��쓣 議고쉶�븯�뒗 �닚�꽌媛숈씠 蹂�寃쏀빐�꽌
 -- �꽦�뒫�쓣 �삱由댁닔 �엳�떎.
 
 -- RNO(�뙎湲�踰덊샇) 媛� �븘�땲�씪 BNO(寃뚯떆湲�踰덊샇)瑜� 湲곗��쑝濡� �젙�젹�빐�넃�� �씤�뜳�뒪瑜� �깮�꽦
 -- create index �씤�뜳�뒪�씠由� on �뀒�씠釉붿씠由� ( 而щ읆1, 而щ읆2.....)
 -- ( ) �븞�뿉 �뱾�뼱媛��뒗 而щ읆�쓽 �닚�꽌�뒗 �씤�뜳�뒪�쓽 湲곗�( �슦�꽑�닚�쐞 )�쓣 �깮�꽦�븷 �닚�꽌
 create index idx_reply
 
 �뙆�씪 �뾽濡쒕뱶
 
 泥⑤��뙆�떥 �꽕�젙�� �봽濡쒖젥�듃�뿉 web.xml �씠 �엳�뒗 寃쎌슦�뿉�뒗 web.xml�뿉�꽌 泥섎━�빐以��떎.
 �뒪�봽留� �궗�슜�떆 MutipartResolver �씪�뒗 ���엯�쓽 媛앹껜瑜� 鍮덉쑝濡� �벑濡앺빐�꽌 �궗�슜
 web 怨� 愿��젴�맂 �꽕�젙�씠誘�濡� servlet-context.xml �쓣 �씠�슜�빐�꽌 鍮덉쑝濡� �벑濡�
 
 �뙆�씪 �뾽濡쒕뱶�떆 怨좊젮�빐�빞 �븯�뒗 �젏�뱾
 
 �룞�씪�븳 �씠由꾩쑝濡� �뙆�씪�씠 �뾽濡쒕뱶 �릺�뿀�쓣�� 湲곗〈 �뙆�씪�씠 �궗�씪吏꾨떎. (�뜮�뼱�벐湲� �빐踰꾨┝)
 泥⑤��뙆�씪 怨듦꺽�뿉 ��鍮꾪븯湲곗쐞�빐 �뾽濡쒕뱶 �뙆�씪�쓽 �솗�옣�옄瑜� �젣�븳
 �뙆�씪�쓽 �겕湲곌� �꼫臾� �겙 寃쎌슦 �궗�쟾 泥섎━
 
 �뙆�씪�씠由� 以묐났泥섎━ 諛⑸쾿
 �븯�굹�뒗 �떆媛꾩쓣 �뙆�씪 �씠由� �븵�뿉 遺숈뿬�꽌 ���옣(�씪諛섏쟻�쑝濡� 留롮씠 �궗�슜�븯�뒗 諛⑸쾿)
 �삉�뒗 �뀈/�썡/�씪 �떒�쐞濡� �뤃�뜑 援ъ“瑜� 留뚮뱾�뼱�꽌 ���옣
 [2022]
    [05]
       [10]
         IU.jpg
  2022_05_10_IU.jpg
  UUID 踰붿슜 怨좎쑀 �떇蹂꾩옄 (�꽕�듃�썙�겕�긽�뿉�꽌 怨좎쑀�꽦�씠 蹂댁옣�릺�뒗 ID)
  
 �씠誘몄� �겕湲곌� �꼫臾� �겙 寃쎌슦 �솕硫댁뿉 洹몃�濡� �궗�슜�븷 寃쎌슦 留롮� �뜲�씠�꽣瑜� �냼鍮꾪빐�빞 �븳�떎.
 紐⑤컮�씪�뿉�꽌 �쎒�럹�씠吏�瑜� �뿬�뒗�뜲 �쎒�럹�씠吏��뿉 �뾼泥��겙 �씠誘몄� �뙆�씪�씠 �룷�븿�릺�뼱 �엳�떎硫�
 �씠誘몄� �뙆�씪�쓽 �겕湲곕쭔�겮 �궓�� �뜲�씠�꽣瑜� �냼紐�
 �듅蹂꾪븳 寃쎌슦媛� �븘�땲硫� �씠誘몄� �겕湲곕�� 以꾩뿬�꽌 �뜽�꽕�씪 泥섎━媛� �븘�슂�븯�떎.
 �뜽�꽕�씪 泥섎━�뒗 �슦由ш� 吏곸젒 �븯吏��븡怨� �씪�씠釉뚮윭由щ�� 媛��졇���꽌 �궗�슜.